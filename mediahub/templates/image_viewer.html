<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ current.title }}</title>
  <link rel="stylesheet" href="/static/mediahub.css">
  <style>
    body { margin:0; background:black; color:white; text-align:center; }
    img { max-width:100vw; max-height:100vh; }
    .nav { position:fixed; top:50%; transform:translateY(-50%); font-size:3rem; cursor:pointer; user-select:none; }
    .left { left:10px; }
    .right { right:10px; }
    header { position:fixed; top:10px; left:10px; }
    button { font-size:1rem; padding:5px; }
  </style>
</head>
<body>
  <header>
    <a href="/library/{{ library.slug }}/" style="color:white;">⬅ Back</a>
    <button onclick="toggleFullscreen()">⛶ Fullscreen</button>
  </header>

  <main>
    <img src="/media/stream/?path={{ current.file_path }}" alt="{{ current.title }}">
  </main>

  {% if prev_index is not None %}
    <a class="nav left" href="/media/image/?lib={{ library.slug }}&index={{ prev_index }}">⟨</a>
  {% endif %}
  {% if next_index is not None %}
    <a class="nav right" href="/media/image/?lib={{ library.slug }}&index={{ next_index }}">⟩</a>
  {% endif %}

  <script>
    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }
    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft" && document.querySelector(".left")) {
        document.querySelector(".left").click();
      }
      if (e.key === "ArrowRight" && document.querySelector(".right")) {
        document.querySelector(".right").click();
      }
      if (e.key === "Escape") {
        window.location.href = "/library/{{ library.slug }}/";
      }
    });
  </script>
</body>
</html>
